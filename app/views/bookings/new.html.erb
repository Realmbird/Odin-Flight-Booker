<%= render 'flight_info'%>
<%= form_with model: @booking do |b|%>
  <%= b.hidden_field :tickets, value: params[:bookings][:tickets] %>
  <%= b.hidden_field :flight_id, value: params[:bookings][:flight_id] %>
  <% params[:bookings][:tickets].to_i.times do%>
    <%= b.fields_for :passengers, @booking.passengers.build do |f|%>
      <div>
        <%= f.label :name, "Name:" %>
        <%= f.text_field :name %>
        <%= f.label :email, "Email:" %>
        <%= f.text_field :email %>
       </div>
    <% end %>
  <% end %>
  <div data-controller="passenger" data-passenger-passenger-count-value = "<%= params[:bookings][:tickets] %>" :>
      <h1 data-passenger-target = "display">Passenger Count</h1>
      <div>
        <button type="button" data-action = "passenger#addPassenger">Add Passenger</button>
        <button type="button" data-action = "passenger#deletePassenger">Delete Passenger</button>
      </div>
  </div>

  <%= b.submit "Confirm" %>
<% end %>

